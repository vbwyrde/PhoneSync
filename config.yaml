# PhoneSync + VideoProcessor - Unified Configuration
# Combines file organization (PhoneSync) with AI video analysis (VideoProcessor)
# Single configuration file for the entire project

# =============================================================================
# PRODUCTION VARIABLES - Update these for production deployment
# =============================================================================
PROD_VARS:
  # Production source folder structure (phone sync root)
  source_root: "\\\\MA-2022-C\\PHONESYNC"

  # Production source subdirectories (will be scanned recursively)
  # Updated structure after Android 12 migration to SD Card only
  source_subdirs:
    - "SDCard_DCIM/Camera"
    - "SDCard_DCIM/FavoritesMA"
    - "SDCard_DCIM/Abr_GIFs"
    - "SDCard_DCIM/Official"
    - "SDCard_DCIM/Videocaptures"
    - "SDCard_DCIM/Mom"
    - "SDCard_DCIM/Video Editor"
    - "SDCard_Messages"
    - "SDCard_Pictures/Instagram"
    - "SDCard_Pictures/Lumii"
    - "SDCard_Pictures/WeChat"
    - "SDCard_Pictures/.thumbnails"
    - "SDCard_Screenshots"

  # Production target paths
  target_root: "\\\\MA-2022-C\\UserData_G"
  target_paths:
    pictures: "\\\\MA-2022-C\\UserData_G\\My Pictures"
    videos: "\\\\MA-2022-C\\UserData_G\\My Videos"
    wudan: "\\\\MA-2022-C\\UserData_G\\My Videos\\Wudan"

# =============================================================================
# DEVELOPMENT/TEST VARIABLES - Used for testing and development
# =============================================================================
DEV_VARS:
  # Development source folders (for testing)
  source_folders:
    - "test_data/source"

  # Development target paths (for testing)
  target_paths:
    pictures: "test_data/My Pictures"
    videos: "test_data/My Videos"
    wudan: "test_data/My Videos/Wudan"

# =============================================================================
# ACTIVE CONFIGURATION - Set which environment to use
# =============================================================================
# Environment: "PRODUCTION" or "DEVELOPMENT"
environment: "PRODUCTION"

# Resolved paths (automatically set based on environment)
source_folders: []  # Will be populated based on environment
target_paths: {}    # Will be populated based on environment

# File type configuration
file_extensions:
  pictures: [".jpg", ".jpeg", ".png", ".gif", ".bmp", ".tiff"]
  videos: [".mp4", ".avi", ".mov", ".wmv", ".mkv", ".flv", ".webm"]

# Wudan time-based rules (converted from PowerShell logic)
wudan_rules:
  description: "Time ranges when video files should go to Wudan folder"
  before_2021:
    days_of_week: [1, 2, 3, 4, 6]  # Mon-Thu, Sat (Monday=1, Sunday=0)
    time_ranges:
      - {start: "05:00", end: "08:00"}
      - {start: "18:00", end: "22:00"}
  after_2021:
    days_of_week: [0, 1, 2, 3, 4, 6]  # Sun-Thu, Sat
    time_ranges:
      0: [{start: "08:00", end: "13:00"}]  # Sunday
      1: [{start: "05:00", end: "08:00"}, {start: "18:00", end: "21:00"}]  # Monday
      2: [{start: "05:00", end: "08:00"}, {start: "18:00", end: "21:00"}]  # Tuesday
      3: [{start: "18:00", end: "22:00"}]  # Wednesday
      4: [{start: "05:00", end: "08:00"}, {start: "18:00", end: "21:00"}]  # Thursday
      6: [{start: "08:00", end: "16:00"}]  # Saturday

# AI and video processing settings
ai_settings:
  lm_studio_url: "http://localhost:1234/v1/chat/completions"
  model: "mimo-vl-7b-rl@q8_k_xl"
  temperature: 0.4
  max_tokens: 150
  timeout_seconds: 30
  kung_fu_prompt: |
    You are an expert at Wudan Kung Fu
    Analyze this video thumbnail for kung fu or martial arts content. Look for:
    - Martial arts poses, stances, or movements
    - Fighting techniques or combat training
    - Traditional Chinese martial arts (kung fu, wushu, tai chi)
    - Training equipment (wooden dummies, weapons, mats)
    - Text mentioning martial arts terms (kung fu, wushu, bagua, tai chi, etc.)
    - People in martial arts uniforms or practicing forms, especially black shirts with frog buttons
    - Kung Fu weapons, such as straight double edged sword (Gim), broadsword (Dao), Spear, Chai Dao, Tiger Hook Swords, Deer Horn Knives, Shepherd Knives, Wooden straight Sword (Miao Dao)

    IMPORTANT: Look carefully for any TEXT in the image that describes the name of the martial arts form being practiced (e.g., "Bagua - Old 8 Palms", "Dragon Walking Sword", "Tai Chi", "Tiger Scratching" etc.). If you find such text, use that EXACT text as your description.
    IMPORTANT: When you find a weapon, do your best to name it appropriately.  If there is no weapon then say it is Empty Hands.
    
    If you see ANY martial arts elements, respond with YES. Only respond with NO if there are clearly no martial arts elements present.

    After your YES/NO answer, provide a brief description (maximum 10 words):
    - If there is text naming a specific form, use that exact text
    - Otherwise, briefly describe the martial arts content you see, such as "Single Practitioner with Gim", or "Two Practitioners with Gim and Dao", etc.
    - If no martial arts content is visible, briefly describe what you see instead, such as "girl standing in front of a lake.", or "turtle next to a rock on the shore of a beach"

# Video processing settings
video_processing:
  thumbnail_extraction: "dynamic_midpoint"  # "dynamic_midpoint" or "fixed_timestamp"
  thumbnail_time: "00:00:10"  # Used only if thumbnail_extraction is "fixed_timestamp"
  thumbnail_scale: "320:240"  # Thumbnail dimensions
  ffmpeg_timeout: 30  # Timeout for FFmpeg operations
  process_existing: false  # false if we want to only process videos not already in target folders
  
# System options (unified from both config files)
options:
  enable_deduplication: true  # Skip processing files already in target folders
  use_hash_comparison: false  # Use name+size comparison instead of hash
  create_missing_folders: true
  dry_run: false
  verbose_logging: false
  force_recopy_if_newer: true
  copy_files: true  # Set to false for move operation instead
  enable_video_analysis: true  # Enable AI video analysis for kung fu detection
  enable_incremental_processing: true  # Only process files newer than last run

# Logging configuration (unified)
logging:
  enabled: true
  log_path: "logs/phone_sync.log"
  max_log_size_mb: 100
  keep_log_days: 30  # Restored to original 30 days
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  rotation_enabled: true

# State management configuration
state_management:
  state_dir: "VideoProcessor/state"  # Directory for processing state files
  processing_state_file: "processing_state.json"
  processed_files_db: "processed_files.json"

# Performance settings
performance:
  max_concurrent_operations: 4  # Number of parallel file operations
  cache_existing_files: true  # Build cache of existing files for deduplication
  progress_reporting_interval: 100  # Report progress every N files

# Development and testing settings
development:
  test_mode: false  # Enable additional test logging
  mock_ai_responses: false  # Use mock responses instead of real AI calls
  skip_video_analysis: false  # Skip AI analysis for testing file organization only
